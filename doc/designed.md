## Deepin Fprintd

这是 `deepin-fprintd` 代码设计文档，功能主要包括一下四个方面(指纹图像的功能不在第一版的规划中，为后续规划):

+ 设备操控
+ 数据存储
+ `dbus` 接口
+ `pam` 模块

下面来详细描述这几部分的设计。


### 设备操控

这一部分主要调用 `libfprint` 的接口，来实现设备的打开与关闭，指纹的录入与校验和设备列表的获取。

录入指纹时支持替换、新增和删除等操作。

指纹校验时支持多组数据的校验，这也是此项目的基础，如果不支持，此项目就作废。



### 数据存储

所有录入的指纹都存储在 `/var/lib/deepin/fprintd` 这个目录下，以手指名创建子目录，子目录里按 `id` 从 `0` 开始存储。

每一组指纹的数据从第一次录入完就固定，不允许新增与修改，只可以删除。


### `dbus` 接口

提供对外接口及录入和验证时的状态



### `pam` 模块

提供 `pam` 模块，用户登录时使用。调用 `dbus` 接口实现具体功能。
